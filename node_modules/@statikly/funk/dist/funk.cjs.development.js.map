{"version":3,"file":"funk.cjs.development.js","sources":["../src/Tabs.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport { useSwipeable, EventData } from 'react-swipeable'\nimport { useUID } from 'react-uid'\n\nenum Direction {\n  HORIZONTAL,\n  VERTICAL,\n}\n\ninterface TabContextValue {\n  id: string\n  activeTab: number\n  numTabs: number\n  setActiveTab(tab: number): void\n  direction: Direction\n}\n\nlet TabContext = createContext<TabContextValue>({\n  id: 'Please provide a unique id',\n  activeTab: 0,\n  numTabs: 0,\n  setActiveTab: () => {},\n  direction: Direction.HORIZONTAL,\n})\n\nexport function useTab(index: number) {\n  let { activeTab } = useContext(TabContext)\n\n  return {\n    isActive: activeTab === index,\n  }\n}\n\ninterface TabGroupProps {\n  initialActiveTab?: number\n  numTabs: number\n  children: React.ReactNode\n  direction?: Direction\n}\n\nexport function TabGroup({\n  initialActiveTab = 0,\n  numTabs,\n  direction = Direction.HORIZONTAL,\n  children,\n}: TabGroupProps) {\n  let id = useUID()\n  let [activeTab, setActiveTab] = useState(initialActiveTab)\n\n  let value = useMemo(\n    () => ({ id, activeTab, setActiveTab, numTabs, direction }),\n    [activeTab, setActiveTab, numTabs, direction]\n  )\n\n  return <TabContext.Provider value={value}>{children}</TabContext.Provider>\n}\n\ninterface TabProps {\n  index: number\n  className: string\n  activeClassName: string\n  inactiveClassName: string\n  trigger?: 'click' | 'hover' | 'none'\n  children?: React.ReactNode\n  [key: string]: any\n}\n\nexport function Tab({\n  index,\n  className,\n  activeClassName,\n  inactiveClassName,\n  trigger = 'click',\n  ...props\n}: TabProps) {\n  let { id, activeTab, setActiveTab } = useContext(TabContext)\n  let tabRef = useRef<HTMLButtonElement>()\n\n  useEffect(() => {\n    if (activeTab === index) {\n      tabRef.current?.focus()\n    }\n  }, [activeTab, index])\n\n  let calculatedClassName = useMemo(() => {\n    return [\n      className,\n      activeTab === index ? activeClassName : inactiveClassName,\n    ].join(' ')\n  }, [className, activeClassName, inactiveClassName, activeTab, index])\n\n  let interactionProps = useMemo(() => {\n    let interactions: any = {}\n\n    interactions.onClick = () => setActiveTab(index)\n\n    if (trigger === 'hover') {\n      interactions.onMouseEnter = () => setActiveTab(index)\n    }\n\n    return interactions\n  }, [trigger, setActiveTab, index])\n\n  return (\n    <button\n      ref={tabRef}\n      role=\"tab\"\n      aria-controls={`${id}-${index}`}\n      aria-selected={activeTab === index}\n      tabIndex={activeTab === index ? 0 : -1}\n      className={calculatedClassName}\n      {...interactionProps}\n      {...props}\n    />\n  )\n}\n\ntype HTMLTags = keyof JSX.IntrinsicElements\n\ninterface TabPanelProps {\n  as?: HTMLTags\n  index: number\n  className: string\n  activeClassName: string\n  inactiveClassName: string\n  children?: React.ReactNode\n  swipeable?: boolean\n  [key: string]: any\n}\n\nexport function TabPanel({\n  as: Component = 'div',\n  index,\n  className,\n  activeClassName,\n  inactiveClassName,\n  swipeable = false,\n  ...props\n}: TabPanelProps) {\n  let { id, activeTab, setActiveTab, numTabs } = useContext(TabContext)\n\n  let onSwiped = useCallback(\n    (e: EventData) => {\n      if (swipeable) {\n        if (e.dir === 'Right') {\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\n          setActiveTab(previous)\n        }\n\n        if (e.dir === 'Left') {\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\n          setActiveTab(next)\n        }\n      }\n    },\n    [swipeable, numTabs, activeTab, setActiveTab]\n  )\n\n  let handlers = useSwipeable({ onSwiped })\n\n  let calculatedClassName = useMemo(() => {\n    return [\n      className,\n      activeTab === index ? activeClassName : inactiveClassName,\n    ].join(' ')\n  }, [className, activeClassName, inactiveClassName, activeTab, index])\n\n  return (\n    // @ts-ignore\n    <Component\n      style={{\n        ...props.style,\n        visibility: activeTab === index ? 'visible' : 'hidden',\n      }}\n      id={`${id}-${index}`}\n      role=\"tabpanel\"\n      disabled={activeTab !== index}\n      aria-expanded={activeTab === index}\n      className={calculatedClassName}\n      {...handlers}\n      {...props}\n    />\n  )\n}\n\ninterface TabListProps {\n  as?: HTMLTags\n  children?: React.ReactNode\n  [key: string]: any\n}\n\nexport function TabList({ as: Component = 'div', ...props }: TabListProps) {\n  let tabListRef = useRef<any>()\n  let { setActiveTab, numTabs, activeTab, direction } = useContext(TabContext)\n\n  let handleKeyUp = useCallback(\n    (e: KeyboardEvent) => {\n      let actions: Record<string, () => void> = {\n        End: () => {\n          setActiveTab(numTabs - 1)\n        },\n        Home: () => {\n          setActiveTab(0)\n        },\n      }\n\n      if (direction === Direction.HORIZONTAL) {\n        actions.ArrowLeft = () => {\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\n          setActiveTab(previous)\n        }\n\n        actions.ArrowRight = () => {\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\n          setActiveTab(next)\n        }\n      }\n\n      if (direction === Direction.VERTICAL) {\n        actions.ArrowUp = () => {\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\n          setActiveTab(previous)\n        }\n\n        actions.ArrowDown = () => {\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\n          setActiveTab(next)\n        }\n      }\n\n      let action = actions[e.key]\n\n      if (action) {\n        e.preventDefault()\n        action()\n      }\n    },\n    [setActiveTab, activeTab, numTabs, direction]\n  )\n\n  useEffect(() => {\n    tabListRef.current.addEventListener('keyup', handleKeyUp)\n\n    return () => tabListRef.current?.removeEventListener('keyup', handleKeyUp)\n  }, [handleKeyUp])\n\n  // @ts-ignore\n  return <Component ref={tabListRef} role=\"tablist\" {...props} />\n}\n\nTabGroup.Tab = Tab\nTabGroup.TabPanel = TabPanel\nTabGroup.TabList = TabList\nTabGroup.useTab = useTab\n\nTabGroup.direction = Direction\n"],"names":["Direction","TabContext","createContext","id","activeTab","numTabs","setActiveTab","direction","HORIZONTAL","useTab","index","useContext","isActive","TabGroup","initialActiveTab","children","useUID","useState","value","useMemo","React","Provider","Tab","className","activeClassName","inactiveClassName","trigger","props","tabRef","useRef","useEffect","current","focus","calculatedClassName","join","interactionProps","interactions","onClick","onMouseEnter","ref","role","tabIndex","TabPanel","as","Component","swipeable","onSwiped","useCallback","e","dir","previous","next","handlers","useSwipeable","style","visibility","disabled","TabList","tabListRef","handleKeyUp","actions","End","Home","ArrowLeft","ArrowRight","VERTICAL","ArrowUp","ArrowDown","action","key","preventDefault","addEventListener","removeEventListener"],"mappings":"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"}